###################
#Autor: Jakub Pezda
###################

using Metody
using Base.Test

#testy metody bisekcji
@testset "Metoda bisekcji tests" begin
	@test mbisekcji(x->x^2, -2.0, 2.0, 2.0^-24, 2.0^-24, 50) == (0, 0, 0, 1)
	@test mbisekcji(x -> x^3 - x + 1, -2.0, 2.0, 2.0^-24, 2.0^-24, 50) == (-1.3247179687023163,-4.886233284651098e-8,27,0)
	@test mbisekcji(x -> x^3*(x+sin(x^2-1)-1)-1, -1.0, 0.0, 2.0^-24, 2.0^-24, 50) == (-0.7730407118797302,-4.6871995951214274e-8,24,0)
	@test mbisekcji(x -> x^3*(x+sin(x^2-1)-1)-1, 1.0, 2.0, 2.0^-24, 2.0^-24, 50) == (1.1898329854011536,-3.945581861231062e-8,24,0)
end

#testy metody stycznych
@testset "Metoda stycznych tests" begin
	@test mstycznych(x -> x^2, x-> 2x, 0.0, 2.0^-24, 2.0^-24, 50) == (0, 0, 0, 0)
	@test mstycznych(x -> x^3-x+1, x -> 3*x^2-1, -1.0, 2.0^-24, 2.0^-24, 50) == (-1.3247179572447898,-1.865174681370263e-13,5,0)
	@test mstycznych(x -> x^3*(x+sin(x^2-1)-1)-1, x->x^2*(-3*sin(1 - x^2) + 2*x^2*cos(1 - x^2) + 4*x - 3), -1.0, 2.0^-24, 2.0^-24, 50) == (-0.7730407245976485,6.772360450213455e-13,4,0)
	@test mstycznych(x -> x^3*(x+sin(x^2-1)-1)-1, x->x^2*(-3*sin(1 - x^2) + 2*x^2*cos(1 - x^2) + 4*x - 3), 1.0, 2.0^-24, 2.0^-24, 50) == (1.1898329904291625,1.2895506884547103e-10,5,0)
end

#testy metody siecznych
@testset "Metoda siecznych tests" begin
	@test msiecznych(x -> x^2, 0.0, 1.0, 2.0^-24, 2.0^-24, 50) == (0, 0, 1, 0)
	@test msiecznych(x -> x^3 - x + 1, -2.0, 2.0, 2.0^-24, 2.0^-24, 50) == (-1.324717960478865,-1.379233083298459e-8,12,0)
	@test msiecznych(x -> x^3*(x+sin(x^2-1)-1)-1, -1.0, 0.0, 2.0^-24, 2.0^-24, 50) == (-0.7730407245944658,-1.1052714299353283e-11,7,0)
	@test msiecznych(x -> x^3*(x+sin(x^2-1)-1)-1, 1.0, 2.0, 2.0^-24, 2.0^-24, 50) == (1.1898329904125486,-1.84297022087776e-12,7,0)
end